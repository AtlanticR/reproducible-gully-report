---
title: "Reproducible Gully Report"
---

#### &copy; Jeff Jackson (Fisheries and Oceans Canada 2021)

## Introduction 

This repository houses scripts in the [R language](https://cran.r-project.org/) developed in the [RStudio](https://rstudio.com/) integrated development environment (IDE) to create a reproducible [Fisheries and Oceans Canada](https://www.dfo-mpo.gc.ca/) technical report on oceanographic monitoring data taken from the [Gully MPA](https://www.dfo-mpo.gc.ca/oceans/mpa-zpm/gully/index-eng.html).

The [renv](https://rstudio.github.io/renv/index.html) package was used to start a clean R environment with nothing but the base R packages and manage all of the additional R packages required to create the technical report.

The [csasdown](https://github.com/pbs-assess/csasdown) package was the key package used for creating the final PDF version of the technical report.  It is built upon other R packages; especially [bookdown](https://bookdown.org/) and [RMarkdown](https://rmarkdown.rstudio.com/).

Although one of the goals of this ambitious project was to generate a completely reproducible report; given the limited time frame that goal could not be reached.  All of the tables in the report are dynamically generated by RMarkdown. Unfortunately all of the figures were created as static images and inserted into the document. Many of the figures were generated by R code but that code is not yet included in the repository.

Hopefully the work captured in this repository will be a solid foundation for reproducing similar technical reports in the future.

## Reproducing the Tech Report

To reproduce the report stored in this repository, you must have R and RStudio installed on your computer.

Download the code and unzip the code into a working folder.

Now open the GullyReproducibleReport.Rproj file, which is the RStudio project, by either: 

- double-clicking on the .Rproj file in the file browser, or 
- opening the project from within RStudio.

The first time the project is opened there will be a message (see following) about the environment being out of sync with the lockfile (see renv).

```r

R version 4.0.5 (2021-03-31) -- "Shake and Throw"
Copyright (C) 2021 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

# Bootstrapping renv 0.13.2 --------------------------------------------------
* Downloading renv 0.13.2 ... OK (downloaded binary)
* Installing renv 0.13.2 ... Done!
* Successfully installed and loaded renv 0.13.2.
* Project 'C:/DEV/new-gully-report' loaded. [renv 0.13.2]
* The project library is out of sync with the lockfile.
* Use `renv::restore()` to install packages recorded in the lockfile.
> 

```

To bring the R environment back into sync with what the project expects the environment to be, do the following:

```r

> renv::restore()
The following package(s) will be updated:

# CRAN ===============================
- BH             [* -> 1.75.0-0]
- DBI            [* -> 1.1.1]
- R6             [* -> 2.5.0]
- RColorBrewer   [* -> 1.1-2]
- Rcpp           [* -> 1.0.6]
- askpass        [* -> 1.1]
- base64enc      [* -> 0.1-3]
- bookdown       [* -> 0.22]
- brio           [* -> 1.1.1]
- callr          [* -> 3.6.0]
- classInt       [* -> 0.4-3]
- cli            [* -> 2.4.0]
- clipr          [* -> 0.7.1]
- colorspace     [* -> 2.0-0]
- cpp11          [* -> 0.2.7]
- crayon         [* -> 1.4.1]
- curl           [* -> 4.3]
- desc           [* -> 1.3.0]
- diffobj        [* -> 0.3.4]
- digest         [* -> 0.6.27]
- dplyr          [* -> 1.0.5]
- e1071          [* -> 1.7-6]
- ellipsis       [* -> 0.3.1]
- evaluate       [* -> 0.14]
- fansi          [* -> 0.4.2]
- farver         [* -> 2.1.0]
- generics       [* -> 0.1.0]
- ggplot2        [* -> 3.3.3]
- glue           [* -> 1.4.2]
- gsw            [* -> 1.0-5]
- gtable         [* -> 0.3.0]
- highr          [* -> 0.8]
- hms            [* -> 1.0.0]
- htmltools      [* -> 0.5.1.1]
- httr           [* -> 1.4.2]
- isoband        [* -> 0.2.4]
- jsonlite       [* -> 1.7.2]
- kableExtra     [* -> 1.3.4]
- knitr          [* -> 1.33]
- labeling       [* -> 0.4.2]
- lifecycle      [* -> 1.0.0]
- lubridate      [* -> 1.7.10]
- magrittr       [* -> 2.0.1]
- markdown       [* -> 1.1]
- mime           [* -> 0.10]
- munsell        [* -> 0.5.0]
- officer        [* -> 0.3.18]
- openssl        [* -> 1.4.3]
- pillar         [* -> 1.6.0]
- pkgconfig      [* -> 2.0.3]
- pkgload        [* -> 1.2.1]
- praise         [* -> 1.0.0]
- processx       [* -> 3.5.1]
- proxy          [* -> 0.4-25]
- ps             [* -> 1.6.0]
- purrr          [* -> 0.3.4]
- readr          [* -> 1.4.0]
- rematch2       [* -> 2.1.2]
- rlang          [* -> 0.4.10]
- rmarkdown      [* -> 2.8]
- rprojroot      [* -> 2.0.2]
- rstudioapi     [* -> 0.13]
- rvest          [* -> 1.0.0]
- scales         [* -> 1.1.1]
- selectr        [* -> 0.4-2]
- sf             [* -> 0.9-8]
- stringi        [* -> 1.5.3]
- stringr        [* -> 1.4.0]
- svglite        [* -> 2.0.0]
- sys            [* -> 3.4]
- systemfonts    [* -> 1.0.1]
- testthat       [* -> 3.0.2]
- tibble         [* -> 3.1.1]
- tidyselect     [* -> 1.1.0]
- tinytex        [* -> 0.31]
- units          [* -> 0.7-1]
- utf8           [* -> 1.2.1]
- uuid           [* -> 0.1-4]
- vctrs          [* -> 0.3.7]
- viridisLite    [* -> 0.3.0]
- waldo          [* -> 0.2.5]
- webshot        [* -> 0.5.2]
- withr          [* -> 2.4.1]
- xfun           [* -> 0.22]
- xml2           [* -> 1.3.2]
- yaml           [* -> 2.2.1]
- zip            [* -> 2.1.1]

# GitHub =============================
- csasdown       [* -> pbs-assess/csasdown@HEAD]
- oce            [* -> dankelley/oce@develop]
- rosettafish    [* -> pbs-assess/rosettafish@HEAD]

Do you want to proceed? [y/N]: y
Installing BH [1.75.0-0] ...
	OK [linked cache]
Installing DBI [1.1.1] ...
	OK [linked cache]
Installing R6 [2.5.0] ...
	OK [linked cache]
Installing RColorBrewer [1.1-2] ...
	OK [linked cache]
Installing Rcpp [1.0.6] ...
	OK [linked cache]
Installing sys [3.4] ...
	OK [linked cache]
Installing askpass [1.1] ...
	OK [linked cache]
Installing base64enc [0.1-3] ...
	OK [linked cache]
Installing digest [0.6.27] ...
	OK [linked cache]
Installing rlang [0.4.10] ...
	OK [linked cache]
Installing htmltools [0.5.1.1] ...
	OK [linked cache]
Installing evaluate [0.14] ...
	OK [linked cache]
Installing highr [0.8] ...
	OK [linked cache]
Installing xfun [0.22] ...
	OK [linked cache]
Installing mime [0.10] ...
	OK [linked cache]
Installing markdown [1.1] ...
	OK [linked cache]
Installing glue [1.4.2] ...
	OK [linked cache]
Installing magrittr [2.0.1] ...
	OK [linked cache]
Installing stringi [1.5.3] ...
	OK [linked cache]
Installing stringr [1.4.0] ...
	OK [linked cache]
Installing yaml [2.2.1] ...
	OK [linked cache]
Installing knitr [1.33] ...
	OK [linked cache]
Installing jsonlite [1.7.2] ...
	OK [linked cache]
Installing tinytex [0.31] ...
	OK [linked cache]
Installing rmarkdown [2.8] ...
	OK [linked cache]
Installing bookdown [0.22] ...
	OK [linked cache]
Installing brio [1.1.1] ...
	OK [linked cache]
Installing ps [1.6.0] ...
	OK [linked cache]
Installing processx [3.5.1] ...
	OK [linked cache]
Installing callr [3.6.0] ...
	OK [linked cache]
Installing proxy [0.4-25] ...
	OK [linked cache]
Installing e1071 [1.7-6] ...
	OK [linked cache]
Installing classInt [0.4-3] ...
	OK [linked cache]
Installing cli [2.4.0] ...
	OK [linked cache]
Installing clipr [0.7.1] ...
	OK [linked cache]
Installing colorspace [2.0-0] ...
	OK [linked cache]
Installing cpp11 [0.2.7] ...
	OK [linked cache]
Installing crayon [1.4.1] ...
	OK [linked cache]
Installing ellipsis [0.3.1] ...
	OK [linked cache]
Installing generics [0.1.0] ...
	OK [linked cache]
Installing lifecycle [1.0.0] ...
	OK [linked cache]
Installing fansi [0.4.2] ...
	OK [linked cache]
Installing utf8 [1.2.1] ...
	OK [linked cache]
Installing vctrs [0.3.7] ...
	OK [linked cache]
Installing pillar [1.6.0] ...
	OK [linked cache]
Installing pkgconfig [2.0.3] ...
	OK [linked cache]
Installing tibble [3.1.1] ...
	OK [linked cache]
Installing purrr [0.3.4] ...
	OK [linked cache]
Installing tidyselect [1.1.0] ...
	OK [linked cache]
Installing dplyr [1.0.5] ...
	OK [linked cache]
Installing gtable [0.3.0] ...
	OK [linked cache]
Installing isoband [0.2.4] ...
	OK [linked cache]
Installing farver [2.1.0] ...
	OK [linked cache]
Installing labeling [0.4.2] ...
	OK [linked cache]
Installing munsell [0.5.0] ...
	OK [linked cache]
Installing viridisLite [0.3.0] ...
	OK [linked cache]
Installing scales [1.1.1] ...
	OK [linked cache]
Installing withr [2.4.1] ...
	OK [linked cache]
Installing ggplot2 [3.3.3] ...
	OK [linked cache]
Installing xml2 [1.3.2] ...
	OK [linked cache]
Installing curl [4.3] ...
	OK [linked cache]
Installing openssl [1.4.3] ...
	OK [linked cache]
Installing httr [1.4.2] ...
	OK [linked cache]
Installing selectr [0.4-2] ...
	OK [linked cache]
Installing rvest [1.0.0] ...
	OK [linked cache]
Installing rstudioapi [0.13] ...
	OK [linked cache]
Installing webshot [0.5.2] ...
	OK [linked cache]
Installing systemfonts [1.0.1] ...
	OK [linked cache]
Installing svglite [2.0.0] ...
	OK [linked cache]
Installing kableExtra [1.3.4] ...
	OK [linked cache]
Installing zip [2.1.1] ...
	OK [linked cache]
Installing uuid [0.1-4] ...
	OK [linked cache]
Installing officer [0.3.18] ...
	OK [linked cache]
Installing hms [1.0.0] ...
	OK [linked cache]
Installing readr [1.4.0] ...
	OK [linked cache]
Installing rosettafish [0.0.0.9000] ...
	OK [linked cache]
Installing csasdown [0.0.10.9000] ...
	OK [linked cache]
Installing rprojroot [2.0.2] ...
	OK [linked cache]
Installing desc [1.3.0] ...
	OK [linked cache]
Installing diffobj [0.3.4] ...
	OK [linked cache]
Installing pkgload [1.2.1] ...
	OK [linked cache]
Installing praise [1.0.0] ...
	OK [linked cache]
Installing rematch2 [2.1.2] ...
	OK [linked cache]
Installing waldo [0.2.5] ...
	OK [linked cache]
Installing testthat [3.0.2] ...
	OK [linked cache]
Installing gsw [1.0-5] ...
	OK [linked cache]
Installing lubridate [1.7.10] ...
	OK [linked cache]
Installing units [0.7-1] ...
	OK [linked cache]
Installing sf [0.9-8] ...
	OK [linked cache]
Installing oce [1.4-0] ...
	OK [linked cache]
> 

```

Next check the status of the environment (lock file) to see if everything is now in sync.

```r

> renv::status()
The following package(s) are installed but not recorded in the lockfile:
            _
  boot        [1.3-27]
  cluster     [2.1.1]
  codetools   [0.2-18]
  foreign     [0.8-81]
  nnet        [7.3-15]
  rpart       [4.1-15]
  spatial     [7.3-13]
  survival    [3.2-10]

Use `renv::snapshot()` to add these packages to your lockfile.

> 

```


If it is not in sync then execute the snapshot command to synchronize the environment again.

```r

> renv::snapshot()
The following package(s) will be updated in the lockfile:

# CRAN ===============================
- boot        [* -> 1.3-27]
- cluster     [* -> 2.1.1]
- codetools   [* -> 0.2-18]
- foreign     [* -> 0.8-81]
- nnet        [* -> 7.3-15]
- rpart       [* -> 4.1-15]
- spatial     [* -> 7.3-13]
- survival    [* -> 3.2-10]

Do you want to proceed? [y/N]: y
* Lockfile written to 'C:/DEV/new-gully-report/renv.lock'.
> 
> renv::status()
* The project is already synchronized with the lockfile.
> 

```

To create the PDF version of the tech report, open the *index.Rmd* file.  After this file is opened, a small warning message may appear at the top of the file window indicating that one or more packages are required but not installed. Click on the Install link at the end of the warning message.  The packages will be installed and the notifying messages that this is being done will be in the *Jobs* pane at the bottom of the RStudio IDE.

```r

** Installing R Packages: 'readxl', 'tidyr'



[1/4] Installing cellranger...

Installing rematch [1.0.1] ...
	OK [linked cache]
Installing cellranger [1.1.0] ...
	OK [linked cache]


[2/4] Installing progress...

Installing prettyunits [1.1.1] ...
	OK [linked cache]
Installing progress [1.2.2] ...
	OK [linked cache]


[3/4] Installing readxl...

Installing readxl [1.3.1] ...
	OK [linked cache]


[4/4] Installing tidyr...

Installing tidyr [1.1.3] ...
	OK [linked cache]


<U+2714> Packages successfully installed.

```

Check the status of the environment again and sync it up if required.

```r

> renv::status()
The following package(s) are installed but not recorded in the lockfile:
              _
  cellranger    [1.1.0]
  prettyunits   [1.1.1]
  progress      [1.2.2]
  readxl        [1.3.1]
  rematch       [1.0.1]
  tidyr         [1.1.3]

Use `renv::snapshot()` to add these packages to your lockfile.

> renv::snapshot()
The following package(s) will be updated in the lockfile:

# CRAN ===============================
- cellranger    [* -> 1.1.0]
- prettyunits   [* -> 1.1.1]
- progress      [* -> 1.2.2]
- readxl        [* -> 1.3.1]
- rematch       [* -> 1.0.1]
- tidyr         [* -> 1.1.3]

Do you want to proceed? [y/N]: y
* Lockfile written to 'C:/DEV/new-gully-report/renv.lock'.
> 

```

Now it is time to try to compile the PDF tech report.  In RStudio at the top of the index.Rmd pane, press the **Knit** button to compile the project.

An **R Markdown** pane will appear in the bottom with the **Console**, **Terminal** and **Jobs** panes. The output in this new pane will be like the following:

```r

processing file: techreport.Rmd
  |.                                                                     |   1%
  ordinary text without R code

  |..                                                                    |   2%
label: setup (with options) 
List of 5
 $ echo   : logi FALSE
 $ cache  : logi FALSE
 $ message: logi FALSE
 $ results: chr "hide"
 $ warning: logi FALSE

  |..                                                                    |   3%
  ordinary text without R code

  |...                                                                   |   4%
label: load-libraries (with options) 
List of 1
 $ cache: logi FALSE


Attaching package: 'dplyr'

The following objects are masked from 'package:stats':

    filter, lag

The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union


Attaching package: 'kableExtra'

The following object is masked from 'package:dplyr':

    group_rows


Attaching package: 'lubridate'

The following objects are masked from 'package:base':

    date, intersect, setdiff, union

Loading required package: gsw
Loading required package: testthat

Attaching package: 'testthat'

The following object is masked from 'package:dplyr':

    matches

Loading required package: sf
Linking to GEOS 3.9.0, GDAL 3.2.1, PROJ 7.2.1

Attaching package: 'scales'

The following object is masked from 'package:readr':

    col_factor

The following object is masked from 'package:oce':

    rescale

  |....                                                                  |   6%
   inline R code fragments

  |.....                                                                 |   7%
label: table1 (with options) 
List of 3
 $ results: chr "asis"
 $ include: logi TRUE
 $ echo   : logi FALSE


Attaching package: 'tidyr'

The following object is masked from 'package:testthat':

    matches

  |......                                                                |   8%
  ordinary text without R code

  |......                                                                |   9%
label: table2 (with options) 
List of 3
 $ results: chr "asis"
 $ include: logi TRUE
 $ echo   : logi FALSE

  |.......                                                               |  10%
  ordinary text without R code

  |........                                                              |  11%
label: table3 (with options) 
List of 3
 $ results: chr "asis"
 $ include: logi TRUE
 $ echo   : logi FALSE

  |.........                                                             |  12%
  ordinary text without R code

  |.........                                                             |  13%
label: table4 (with options) 
List of 3
 $ results: chr "asis"
 $ include: logi TRUE
 $ echo   : logi FALSE

Joining, by = "years"
  |..........                                                            |  15%
  ordinary text without R code

  |...........                                                           |  16%
label: table5 (with options) 
List of 3
 $ results: chr "asis"
 $ include: logi TRUE
 $ echo   : logi FALSE

  |............                                                          |  17%
  ordinary text without R code

  |.............                                                         |  18%
label: table6 (with options) 
List of 3
 $ results: chr "asis"
 $ include: logi TRUE
 $ echo   : logi FALSE

  |.............                                                         |  19%
  ordinary text without R code

  |..............                                                        |  20%
label: table7 (with options) 
List of 3
 $ results: chr "asis"
 $ include: logi TRUE
 $ echo   : logi FALSE

  |...............                                                       |  21%
  ordinary text without R code

  |................                                                      |  22%
label: table8 (with options) 
List of 3
 $ results: chr "asis"
 $ include: logi TRUE
 $ echo   : logi FALSE

  |.................                                                     |  24%
  ordinary text without R code

  |.................                                                     |  25%
label: figure1 (with options) 
List of 2
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig1-caption)"

  |..................                                                    |  26%
  ordinary text without R code

  |...................                                                   |  27%
label: figure2 (with options) 
List of 2
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig2-caption)"

  |....................                                                  |  28%
  ordinary text without R code

  |....................                                                  |  29%
label: figure3 (with options) 
List of 2
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig3-caption)"

  |.....................                                                 |  30%
  ordinary text without R code

  |......................                                                |  31%
label: figure4 (with options) 
List of 2
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig4-caption)"

  |.......................                                               |  33%
  ordinary text without R code

  |........................                                              |  34%
label: figure5 (with options) 
List of 3
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig5-caption)"
 $ out.width: chr "7.75in"

  |........................                                              |  35%
  ordinary text without R code

  |.........................                                             |  36%
label: figure6 (with options) 
List of 3
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig6-caption)"
 $ out.width: chr "7.75in"

  |..........................                                            |  37%
  ordinary text without R code

  |...........................                                           |  38%
label: figure7 (with options) 
List of 3
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig7-caption)"
 $ out.width: chr "7.75in"

  |............................                                          |  39%
  ordinary text without R code

  |............................                                          |  40%
label: figure8 (with options) 
List of 3
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig8-caption)"
 $ out.width: chr "9.25in"

  |.............................                                         |  42%
  ordinary text without R code

  |..............................                                        |  43%
label: figure9 (with options) 
List of 3
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig9-caption)"
 $ out.width: chr "9.0in"

  |...............................                                       |  44%
  ordinary text without R code

  |...............................                                       |  45%
label: figure10 (with options) 
List of 2
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig10-caption)"

  |................................                                      |  46%
  ordinary text without R code

  |.................................                                     |  47%
label: figure11 (with options) 
List of 2
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig11-caption)"

  |..................................                                    |  48%
  ordinary text without R code

  |...................................                                   |  49%
label: figure12 (with options) 
List of 2
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig12-caption)"

  |...................................                                   |  51%
  ordinary text without R code

  |....................................                                  |  52%
label: figure13 (with options) 
List of 3
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig13-caption)"
 $ out.width: chr "9.5in"

  |.....................................                                 |  53%
  ordinary text without R code

  |......................................                                |  54%
label: figure14 (with options) 
List of 2
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig14-caption)"

  |.......................................                               |  55%
  ordinary text without R code

  |.......................................                               |  56%
label: figure15 (with options) 
List of 3
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig15-caption)"
 $ out.width: chr "5.0in"

  |........................................                              |  57%
  ordinary text without R code

  |.........................................                             |  58%
label: figure16 (with options) 
List of 2
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig16-caption)"

  |..........................................                            |  60%
  ordinary text without R code

  |..........................................                            |  61%
label: figure17 (with options) 
List of 3
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig17-caption)"
 $ out.width: chr "7.5in"

  |...........................................                           |  62%
  ordinary text without R code

  |............................................                          |  63%
label: figure18 (with options) 
List of 2
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig18-caption)"

  |.............................................                         |  64%
  ordinary text without R code

  |..............................................                        |  65%
label: figure19 (with options) 
List of 2
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig19-caption)"

  |..............................................                        |  66%
  ordinary text without R code

  |...............................................                       |  67%
label: figure20 (with options) 
List of 2
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig20-caption)"

  |................................................                      |  69%
  ordinary text without R code

  |.................................................                     |  70%
label: figure21 (with options) 
List of 2
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig21-caption)"

  |..................................................                    |  71%
  ordinary text without R code

  |..................................................                    |  72%
label: figure22 (with options) 
List of 3
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig22-caption)"
 $ out.width: chr "6.5in"

  |...................................................                   |  73%
  ordinary text without R code

  |....................................................                  |  74%
label: figure23 (with options) 
List of 3
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig23-caption)"
 $ out.width: chr "7.5in"

  |.....................................................                 |  75%
  ordinary text without R code

  |.....................................................                 |  76%
label: figure24 (with options) 
List of 2
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig24-caption)"

  |......................................................                |  78%
  ordinary text without R code

  |.......................................................               |  79%
label: figure25 (with options) 
List of 2
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig25-caption)"

  |........................................................              |  80%
  ordinary text without R code

  |.........................................................             |  81%
label: figure26 (with options) 
List of 2
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig26-caption)"

  |.........................................................             |  82%
  ordinary text without R code

  |..........................................................            |  83%
label: figure27 (with options) 
List of 2
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig27-caption)"

  |...........................................................           |  84%
  ordinary text without R code

  |............................................................          |  85%
label: figure28 (with options) 
List of 2
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig28-caption)"

  |.............................................................         |  87%
  ordinary text without R code

  |.............................................................         |  88%
label: figure29 (with options) 
List of 2
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig29-caption)"

  |..............................................................        |  89%
  ordinary text without R code

  |...............................................................       |  90%
label: figure30 (with options) 
List of 2
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig30-caption)"

  |................................................................      |  91%
  ordinary text without R code

  |................................................................      |  92%
label: figure31 (with options) 
List of 3
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig31-caption)"
 $ out.width: chr "5.5in"

  |.................................................................     |  93%
  ordinary text without R code

  |..................................................................    |  94%
label: figure32 (with options) 
List of 3
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig32-caption)"
 $ out.width: chr "5.5in"

  |...................................................................   |  96%
  ordinary text without R code

  |....................................................................  |  97%
label: figure33 (with options) 
List of 3
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig33-caption)"
 $ out.width: chr "7.5in"

  |....................................................................  |  98%
  ordinary text without R code

  |..................................................................... |  99%
label: figure34 (with options) 
List of 3
 $ fig.align: chr "center"
 $ fig.cap  : chr "(ref:fig34-caption)"
 $ out.width: chr "4.75in"

  |......................................................................| 100%
  ordinary text without R code


output file: techreport.knit.md

"C:/Users/JacksonJ/ANACON~1/Scripts/pandoc" +RTS -K512m -RTS techreport.knit.md --to latex --from markdown+autolink_bare_uris+tex_math_single_backslash --output techreport.tex --lua-filter "C:\Users\JacksonJ\AppData\Local\renv\cache\v5\R-4.0\x86_64-w64-mingw32\bookdown\0.22\8fb0b67dfdf9d751fc93cb0036def3cc\bookdown\rmarkdown\lua\custom-environment.lua" --lua-filter "C:\Users\JacksonJ\AppData\Local\renv\cache\v5\R-4.0\x86_64-w64-mingw32\rmarkdown\2.8\f518ba47713f92d0d603eec7c6888faf\rmarkdown\rmarkdown\lua\pagebreak.lua" --lua-filter "C:\Users\JacksonJ\AppData\Local\renv\cache\v5\R-4.0\x86_64-w64-mingw32\rmarkdown\2.8\f518ba47713f92d0d603eec7c6888faf\rmarkdown\rmarkdown\lua\latex-div.lua" --metadata-file "C:\Users\JacksonJ\AppData\Local\Temp\1\RtmpgBRgxg\file54bc2460464f" --self-contained --table-of-contents --toc-depth 2 --template "C:\Users\JacksonJ\AppData\Local\renv\cache\v5\R-4.0\x86_64-w64-mingw32\csasdown\0.0.10.9000\57f2cf63e839d922570cf1fe22c1f26b\csasdown\csas-tex\tech-report.tex" --number-sections --highlight-style tango --pdf-engine xelatex --top-level-division=chapter --wrap=none --default-image-extension=png --include-in-header "C:\Users\JacksonJ\AppData\Local\Temp\1\RtmpgBRgxg\rmarkdown-str54bc371224f.html" --variable tables=yes --standalone -Mhas-frontmatter=false --citeproc 
[1] "C:/DEV/new-gully-report/_book/techreport.pdf"

Output created: _book/techreport.pdf
Warning messages:
1: In eval(expr, envir, enclos) : NAs introduced by coercion
2: LaTeX Warning: Command \underbar  has changed.
               Check if current package is valid.
LaTeX Warning: Command \underline  has changed.
               Check if current package is valid. 

```

Once the document is knit together a PDF file (**_techreport.pdf_**) will appear in a viewer.

## Edits to the LaTeX intermediate file

There are a few things that need to be fixed but it involves the editing of the intermediate [LaTeX](https://www.latex-project.org/) file (**_techreport.tex_**) that was generated from the **RMarkdown** files. It is stored in the **\_book** sub-folder where the **_techreport.pdf_** file is also located. The LaTeX file is used to generate the PDF document.

Before editing the LaTeX file it must be copied from the **\_book** sub-folder to the main folder.

### Problems to Fix

**Problem 1:** The TABLES and FIGURES are subsections of the REFERENCES section instead of being their own sections.

**Solution:** Removed the "sub" prefix from the TABLES and FIGURES sections.

```latex
\hypertarget{sec:tables}{%
\subsection{TABLES}\label{sec:tables}}

became

\hypertarget{sec:tables}{%
\section{TABLES}\label{sec:tables}}

and

\hypertarget{sec:figures}{%
\subsection{FIGURES}\label{sec:figures}}

became

\hypertarget{sec:figures}{%
\section{FIGURES}\label{sec:figures}}
```
<br/>

**Problem 2:** Inline references when there are more than two authors are indicated with the format **\<Primary Author\> et al.**. Normally this **_et al._** phrase, which is the abbreviated version of the Latin phrase "et alia" meaning "and others", is italicized. I could not achieve this in RMarkdown.

**Solution:** Did a search in the LaTeX document to find and replace all occurrences of "et al." with "\textit{et al.}". All 51 occurrences were changed.

## Generate new PDF document

Since the intermediate LaTeX file was edited it has to be converted to PDF format outside of RStudio.

This is done within an operating system console window (using Windows 10 Anaconda command prompt in this instance) like so:

(base) PS C:\\dev\\new-gully-report> **xelatex techreport.tex**

One will notice at first glance that:

- the resulting PDF document has the correct section numbers for the Tables and Figures, 
- the "et al." phrases are all italicized, but
- the Table of Contents (TOC) is totally empty, and
- some in-document links to the tables and figures may be invalid as indicated by question marks.

Checking the console window one will notice two warnings at the end of compilation, which are: 

1. LaTeX Warning: There were undefined references.

2. LaTeX Warning: Label(s) may have changed. Rerun to get cross-references right.

Re-running the command will generate the TOC and fix the in-document links to tables and figures but still one of the two warnings remained.  Executing the command a third time gets rid of the last warning.

## Congratulation! The final report has been generated. :-)
